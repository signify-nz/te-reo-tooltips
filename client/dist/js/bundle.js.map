{"version":3,"sources":["webpack:///webpack/bootstrap c040854894631497e39c","webpack:///./client/src/js/TeReoPlugin.js"],"names":["tinymce","PluginManager","add","editor","url","dictionaryMap","Map","library","bookmark","addHtmlToTextNode","textNode","innerHTML","span","document","createElement","parentNode","insertBefore","insertAdjacentHTML","remove","escapeHtml","text","replace","checkForMatches","content","shortcode","openTag","closeTag","inputList","split","outputList","i","length","has","trim","push","join","treeWalk","rng","startNode","selection","getNode","walker","dom","TreeWalker","found","finished","garbage","currentNode","current","isEqualNode","startContainer","endContainer","nodeType","result","nodeValue","substr","startOffset","getContent","endOffset","next","moveToBookmark","newWordPair","base","destination","id","activeEditor","windowManager","alert","get","close","request","XMLHttpRequest","path","open","send","onreadystatechange","handleUpdateResponse","readyState","status","set","translateThroughAPI","textContent","Http","handleTranslationResponse","setContent","responseText","format","undoManager","getDictionary","handleWordPairResponse","response","JSON","parse","Base","Destination","getDictionaries","handleDictionaryResponse","Title","value","ID","on","restoreShortcodes","restoration","match","slice","console","log","replaceShortcodes","size","event","addToDictMenu","layout","pack","align","onClose","focus","onSubmit","buttons","subtype","onclick","selectedID","find","o","getElementById","type","flex","title","items","padding","labelGap","spacing","name","label","tooltip","values","onPostRender","addMenuItem","addButton","image","getBookmark","fire","getRng"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/js/TeReoPlugin.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c040854894631497e39c","/* global tinymce */\n// eslint-disable-next-line no-unused-vars\ntinymce.PluginManager.add('TeReoPlugin', (editor, url) => {\n  // Likely need to 'escape' regex function, possible security issue with user input. https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n  const dictionaryMap = new Map();\n  const library = [];\n  let bookmark;\n\n  // credit: https://stackoverflow.com/questions/16662393/insert-html-into-text-node-with-javascript\n  function addHtmlToTextNode(textNode, innerHTML) {\n    const span = document.createElement('span');\n    textNode.parentNode.insertBefore(span, textNode);\n    span.insertAdjacentHTML('beforebegin', innerHTML);\n    span.remove();\n    return textNode;\n  }\n\n  // credit: https://stackoverflow.com/questions/6234773/can-i-escape-html-special-chars-in-javascript\n  function escapeHtml(text) {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#039;');\n  }\n\n  function checkForMatches(content, shortcode = true) {\n    let openTag = '';\n    let closeTag = '';\n    if (!content) {\n      return content;\n    }\n    if (shortcode) {\n      openTag = '[TT]';\n      closeTag = '[/TT]';\n    } else {\n      openTag = '<span class=\\\"TeReoTooltip\\\" style=\"text-decoration: underline 1px dashed;\">';\n      closeTag = '</span>';\n    }\n    const inputList = content.split(/\\b/g);\n    const outputList = [];\n    for (let i = 0; i < inputList.length; i++) {\n      if (dictionaryMap.has(inputList[i].trim())) {\n        outputList.push(openTag + inputList[i] + closeTag);\n      } else {\n        outputList.push(inputList[i]);\n      }\n    }\n    return outputList.join('');\n  }\n\n  // The value of this function over something more simple (i.e. getContent, modify, setContent)\n  // is that it circumvents tinymce's cleanup functionality which\n  // will insert HTML tags when modifying a selection\n  function treeWalk(rng) {\n    const startNode = editor.selection.getNode();\n    const walker = new tinymce.dom.TreeWalker(startNode);\n    let found = false;\n    let finished = false;\n    let garbage;\n    do {\n      if (garbage) {\n        garbage.remove();\n        garbage = null;\n      }\n      const currentNode = walker.current();\n      if (\n        currentNode.isEqualNode(rng.startContainer)\n        && currentNode.isEqualNode(rng.endContainer)\n        && currentNode.nodeType === 3\n      ) {\n        found = false;\n        const result = escapeHtml(currentNode.nodeValue.substr(0, rng.startOffset))\n          + checkForMatches(editor.selection.getContent(), false)\n          + escapeHtml(currentNode.nodeValue.substr(rng.endOffset));\n        garbage = addHtmlToTextNode(currentNode, result);\n      } else if (currentNode.nodeType === 3) {\n        if (currentNode.isEqualNode(rng.endContainer)) {\n          const result = checkForMatches(currentNode.nodeValue.substr(0, rng.endOffset), false)\n            + currentNode.nodeValue.substr(rng.endOffset);\n          garbage = addHtmlToTextNode(currentNode, result);\n          found = false;\n          finished = true;\n        } else if (found) {\n          const result = checkForMatches(currentNode.nodeValue, false);\n          garbage = addHtmlToTextNode(currentNode, result);\n        } else if (currentNode.isEqualNode(rng.startContainer)) {\n          const result = currentNode.nodeValue.substr(0, rng.startOffset)\n            + checkForMatches(currentNode.nodeValue.substr(rng.startOffset), false);\n          garbage = addHtmlToTextNode(currentNode, result);\n          found = true;\n        }\n      }\n    } while (walker.next() && !finished);\n    if (garbage) {\n      garbage.remove();\n    }\n    editor.selection.moveToBookmark(bookmark);\n  }\n\n  function newWordPair(base, destination, id) {\n    if (!base || !destination) {\n      tinymce.activeEditor.windowManager.alert('Cannot submit an empty field!');\n    } else if (dictionaryMap.has(base)) {\n      tinymce.activeEditor.windowManager.alert(`This word already has a translation! (${dictionaryMap.get(base)})`);\n    } else {\n      tinymce.activeEditor.windowManager.close();\n      const request = new XMLHttpRequest();\n      const path = `/api/v1/dictionary/addWordPair/${id}?base=${base}&destination=${destination}`;\n      request.open('POST', path);\n      request.send();\n      request.onreadystatechange = function handleUpdateResponse() {\n        if (this.readyState === 4 && this.status === 200) {\n          dictionaryMap.set(base, destination);\n          tinymce.activeEditor.windowManager.alert(`Successfully added wordpair \"${base}\", \"${destination}\".`);\n        }\n      };\n    }\n  }\n\n  // Post request can handle much larger quantities\n  // Tested with 15000 word request with approx 1 sec delay\n  function translateThroughAPI(textContent) {\n    const Http = new XMLHttpRequest();\n    const path = '/api/v1/dictionary/translateThroughInterface';\n    Http.open('POST', path, true);\n    Http.onreadystatechange = function handleTranslationResponse() {\n      if (this.readyState === 4 && this.status === 200) {\n        editor.setContent(Http.responseText, { format: 'html' });\n        editor.undoManager.add();\n        tinymce.activeEditor.selection.moveToBookmark(bookmark);\n      }\n    };\n    Http.send(textContent);\n  }\n\n  // pass dictionary ID as argument to receive that dictionary, pass 0 to get currently dictionary\n  function getDictionary(id) {\n    const request = new XMLHttpRequest();\n    const path = `/api/v1/dictionary/dictionaries/${id}`;\n    request.open('GET', path);\n    request.send();\n    request.onreadystatechange = function handleWordPairResponse() {\n      if (this.readyState === 4 && this.status === 200) {\n        let response = request.responseText;\n        response = JSON.parse(response);\n        for (let i = 0; i < response.length; i++) {\n          dictionaryMap.set(response[i].Base, response[i].Destination);\n        }\n      }\n    };\n  }\n\n  function getDictionaries() {\n    const request = new XMLHttpRequest();\n    const path = '/api/v1/dictionary/index/';\n    request.open('GET', path);\n    request.send();\n    request.onreadystatechange = function handleDictionaryResponse() {\n      if (this.readyState === 4 && this.status === 200) {\n        let response = request.responseText;\n        response = JSON.parse(response);\n        for (let i = 0; i < response.length; i++) {\n          library.push({\n            text: response[i].Title,\n            value: response[i].Title,\n            id: response[i].ID\n          });\n        }\n      }\n    };\n  }\n\n  // TODO hard-coded dictionary ID is not acceptable -- can provide no argument\n  // and receive default? I think currently it just returns a list of dictionaries\n  editor.on('init', () => {\n    getDictionary();\n    getDictionaries();\n  });\n\n  // this slice method is not robust, maybe use a regex to find everything between\n  // the first '>' and the second '<'\n  function restoreShortcodes(content) {\n    let restoration = null;\n    const startOffset = 74;\n    const endOffset = 7;\n    return content.replace(/(<span class=\"TeReoTooltip\" style=\"text-decoration: underline 1px dashed;\">)(.+?)(<\\/span>)/g, (match) => {\n      if (dictionaryMap.has(match.slice(startOffset, match.length - endOffset))) {\n        restoration = `[TT]${match.slice(startOffset, match.length - endOffset)}[/TT]`;\n        console.log('returning a shortcode, see below');\n        console.log(restoration);\n      } else {\n        restoration = checkForMatches(match.slice(startOffset, match.length - endOffset));\n      }\n      return restoration;\n    });\n  }\n\n  // adding a zero width space on the end means that text written after\n  // a translation will not be in the span.\n  // this has a hasty bug fix, this code runs before the dictionarymap is populated, so the\n  // shortcodes are not replaced on page load. the last 'if else' addresses this\n  function replaceShortcodes(content) {\n    console.log('starting replace function1');\n    const startOffset = 4;\n    const endOffset = 5;\n    const openTag = '<span class=\\\"TeReoTooltip\\\" style=\"text-decoration: underline 1px dashed;\">';\n    const closeTag = '</span>&#8203';\n    // preceded by '[TT]', anything between, followed by '[/TT]'\n    return content.replace(/\\[TT([^\\]]*)\\]([^\\]]*)\\[\\/TT\\]/g, function (match) {\n      console.log('found something in TT tags');\n      if (dictionaryMap.has(match.slice(startOffset, match.length - endOffset))) {\n        console.log('found a match, returning html tags');\n        return openTag + match.slice(startOffset, match.length - endOffset) + closeTag;\n      }\n      if (dictionaryMap.size == 0) {\n        console.log('dict is empty, returning styled tags');\n        return openTag + match.slice(startOffset, match.length - endOffset) + closeTag;\n      }\n      console.log('no match gounf, returning base word');\n      return match.slice(startOffset, match.length - endOffset);\n    });\n  }\n\n    // Before content is set in the editor, the shortcodes are replaced with a simple span tag to style and delineate translations\n    editor.on('BeforeSetcontent', function (event) {\n      event.content = replaceShortcodes(event.content);\n  });\n\n  //When content is retrieved from the editor, the span tag is removed and the shortcodes are restored\n  editor.on('GetContent', function (event) {\n      event.content = restoreShortcodes(event.content);\n  });\n\n  // Credit to the searchReplace plugin for how to do this\n  function addToDictMenu(selection) {\n    editor.windowManager.open({\n      layout: 'flex',\n      pack: 'center',\n      align: 'center',\n      onClose() {\n        editor.focus();\n      },\n      onSubmit() {\n      },\n      buttons: [\n        {\n          text: 'Add',\n          subtype: 'primary',\n          onclick() {\n            // This is likely messier than it needs to be. can it\n            // handle special characters? is there any conversion?\n            const selectedID = library.find(o => o.text === document.getElementById('DictionaryDisplayComboBox-inp').value).id;\n            newWordPair(document.getElementById('BaseInputTextBox').value, document.getElementById('DestinationInputTextBox').value, selectedID);\n          }\n        },\n        { type: 'spacer', flex: 1 },\n      ],\n      title: 'Add to Dictionary',\n      items: {\n        type: 'form',\n        padding: 20,\n        labelGap: 30,\n        spacing: 10,\n        items: [\n          { type: 'textbox', name: 'Base', size: 40, label: 'Base', value: selection.trim(), id: 'BaseInputTextBox', tooltip: 'An untranslated word' },\n          { type: 'textbox', name: 'Destination', size: 40, label: 'Translation', id: 'DestinationInputTextBox', tooltip: 'A translated word' },\n          {\n            type: 'combobox',\n            name: 'Dictionary',\n            size: 40,\n            label: 'Dictionary',\n            id: 'DictionaryDisplayComboBox',\n            tooltip: 'Select which dictionary you want to add to',\n            values: library,\n            onPostRender() {\n              // Select the first item by default, should get active?\n              this.value(library[0].value);\n            },\n          },\n        ],\n      },\n    });\n  }\n\n  editor.addMenuItem('addToDictionary', {\n    text: 'Add to Dictionary',\n    onclick() {\n      const selection = editor.selection.getContent({ format: 'text' });\n      addToDictMenu(selection);\n    }\n  });\n\n  editor.addButton('translate', {\n    image: '/_resources/vendor/signify-nz/te_reo_tooltips/client/dist/img/globe-light.svg',\n    tooltip: 'Translate content',\n    onclick() {\n      bookmark = tinymce.activeEditor.selection.getBookmark(2, true);\n      editor.undoManager.add();\n      translateThroughAPI(editor.getContent());\n      tinymce.activeEditor.fire('change');\n    }\n  });\n\n  // repeated translations cause issues, fix by adding validation in checkForMatches?\n  editor.addMenuItem('contextTranslate', {\n    text: 'Translate',\n    onclick() {\n      bookmark = tinymce.activeEditor.selection.getBookmark(2, true);\n      treeWalk(editor.selection.getRng());\n      tinymce.activeEditor.fire('change');\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/js/TeReoPlugin.js"],"sourceRoot":""}